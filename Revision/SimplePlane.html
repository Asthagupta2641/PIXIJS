<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/6.5.2/browser/pixi.js" integrity="sha512-XHX32YCocEDCIiENmO7pf91TtRITLfCagN+uLlj9sJ7RUVBHN1JZtlfb02x4OyXfkuQegd1u6i9mzpRMg+w5xw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <script>
        const app = new PIXI.Application({
            width:800,
            height:600,
            backgroundColor:0x1099bb, 
            resolution:window.devicePixelRatio || 1,
        });
        document.body.appendChild(app.view);
        app.loader.add('grass','./assets/bg_displacement.jpg').load(build);


        function build(){
            const texture =app.loader.resources.grass.texture;

            const verticesX = 40;
            const verticesY = 40;
            const plane = new PIXI.SimplePlane(texture, verticesX,verticesY);

            plane.x = 100;
            plane.y=100;
            app.stage.addChild(plane);


              // Get the buffer for vertice positions.
    const buffer = plane.geometry.getBuffer('aVertexPosition');

// Listen for animate update
app.ticker.add((delta) => {
    // Randomize the vertice positions a bit to create movement.
    for (let i = 0; i < buffer.data.length; i++) {
        buffer.data[i] += (Math.random() - 0.5);
    }
    buffer.update();
});
}
    </script>
    
</body>
</html>